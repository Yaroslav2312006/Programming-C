#include <stdio.h>
#include <stdlib.h>
// Объявление функций из другого модуля
double **create_matrix(int n);
void free_matrix(double **matrix, int n);
void input_matrix(double **matrix, int n, const char *name);
void print_matrix(double **matrix, int n);
double **matrix_operation(double **A, double **B, int n, char op);
int main() {
    int n;
    char op;
    printf("Введите размер матриц (n): ");
    scanf("%d", &n);
    if (n <= 0) {
        printf("Ошибка: размер матрицы должен быть положительным!\n");
        return 1;
    }
    // Создаём две матрицы
    double **A = create_matrix(n);
    double **B = create_matrix(n);
    if (!A || !B) {
        printf("Ошибка выделения памяти!\n");
        return 1;
    }
    // Вводим матрицы
    input_matrix(A, n, "A");
    input_matrix(B, n, "B");
    // Вводим операцию
    printf("Введите операцию (+, -, *): ");
    scanf(" %c", &op);  // Пробел перед %c, чтобы пропустить лишние символы
    // Выполняем операцию
    double **result = matrix_operation(A, B, n, op);
    if (!result) {
        printf("Ошибка: некорректная операция или память не выделена!\n");
    } else {
        printf("Результат:\n");
        print_matrix(result, n);
    }
    // Освобождаем память
    free_matrix(A, n);
    free_matrix(B, n);
    free_matrix(result, n);
    return 0;
}
